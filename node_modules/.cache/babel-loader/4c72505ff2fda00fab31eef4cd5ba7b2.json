{"ast":null,"code":"import BoundingBox from './BoundingBox.js';\nimport CasusBlock from './CasusBlock.js';\nimport EmptyBlock from './EmptyBlock.js';\nimport ContainerBlock from './ContainerBlock.js';\nimport Vec from './Vec.js';\nimport { IF_BLOCK_IF_WIDTH, IF_ELSE_BLOCK_ELSE_WIDTH, EMPTY_STATEMENT_HEIGHT, RAMP_WIDTH, VPADDING } from './generateCornerPerim.js';\n\nclass IfElseBlock extends CasusBlock {\n  constructor() {\n    super();\n    this.conditionBlock = new EmptyBlock('BOOLEAN');\n    this.ifContents = new ContainerBlock();\n    this.elseContents = new ContainerBlock();\n  }\n\n  precompBounds() {\n    this.conditionBlock.precompBounds();\n    this.ifContents.precompBounds();\n    this.elseContents.precompBounds();\n    let width = Math.max(IF_BLOCK_IF_WIDTH + this.conditionBlock.boundingBox.w + RAMP_WIDTH, this.ifContents.boundingBox.w + RAMP_WIDTH, IF_ELSE_BLOCK_ELSE_WIDTH, this.elseContents.boundingBox.w + RAMP_WIDTH);\n    let height = VPADDING + this.conditionBlock.boundingBox.h + VPADDING;\n    this.ifHeaderBoundingBox = new BoundingBox(0, 0, width, height);\n    this.elseHeaderBoundingBox = new BoundingBox(0, 0, width, VPADDING + EMPTY_STATEMENT_HEIGHT + VPADDING);\n    height += this.ifContents.boundingBox.h;\n    height += this.elseHeaderBoundingBox.h;\n    height += this.elseContents.boundingBox.h;\n    height += RAMP_WIDTH;\n    this.boundingBox = new BoundingBox(0, 0, width, height);\n  }\n\n  getPerim() {\n    const toReturn = [];\n    const ifHeader = this.ifHeaderBoundingBox;\n    const elseHeader = this.elseHeaderBoundingBox;\n    const bounding = this.boundingBox;\n    toReturn.push(new Vec(ifHeader.x, ifHeader.y));\n    toReturn.push(new Vec(ifHeader.x + ifHeader.w, ifHeader.y));\n    toReturn.push(new Vec(ifHeader.x + ifHeader.w, ifHeader.y + ifHeader.h));\n    toReturn.push(new Vec(ifHeader.x + RAMP_WIDTH, ifHeader.y + ifHeader.h));\n    toReturn.push(new Vec(elseHeader.x + RAMP_WIDTH, elseHeader.y));\n    toReturn.push(new Vec(elseHeader.x + elseHeader.w, elseHeader.y));\n    toReturn.push(new Vec(elseHeader.x + elseHeader.w, elseHeader.y + elseHeader.h));\n    toReturn.push(new Vec(elseHeader.x + RAMP_WIDTH, elseHeader.y + elseHeader.h));\n    toReturn.push(new Vec(elseHeader.x + RAMP_WIDTH, bounding.y + bounding.h - RAMP_WIDTH));\n    toReturn.push(new Vec(bounding.x + bounding.w, bounding.y + bounding.h - RAMP_WIDTH));\n    toReturn.push(new Vec(bounding.x + bounding.w, bounding.y + bounding.h));\n    toReturn.push(new Vec(bounding.x, bounding.y + bounding.h));\n    return toReturn;\n  }\n\n  precompXY(x, y) {\n    this.ifHeaderBoundingBox.x = x;\n    this.ifHeaderBoundingBox.y = y;\n    this.boundingBox.x = x;\n    this.boundingBox.y = y;\n    let curX = x + IF_BLOCK_IF_WIDTH;\n    let curY = y + VPADDING;\n    this.conditionBlock.precompXY(curX, curY);\n    curX = x + RAMP_WIDTH;\n    curY = y + this.ifHeaderBoundingBox.h;\n    this.ifContents.precompXY(curX, curY);\n    curY += this.ifContents.boundingBox.h;\n    this.elseHeaderBoundingBox.x = x;\n    this.elseHeaderBoundingBox.y = curY;\n    curY += this.elseHeaderBoundingBox.h;\n    this.elseContents.precompXY(curX, curY);\n  }\n\n  getChildBlocks() {\n    return [this.conditionBlock, this.ifContents, this.elseContents];\n  }\n\n  removeBlockAt(v, removeAfter) {\n    const conditionRes = this.conditionBlock.removeBlockAt(v, removeAfter);\n\n    if (conditionRes.length > 0) {\n      return conditionRes;\n    }\n\n    if (this.conditionBlock.boundingBox.contains(v) && this.conditionBlock.draggable()) {\n      const toReturn = [this.conditionBlock];\n      this.conditionBlock = new EmptyBlock('BOOLEAN');\n      return toReturn;\n    }\n\n    const ifContentsRes = this.ifContents.removeBlockAt(v, removeAfter);\n\n    if (ifContentsRes.length > 0) {\n      return ifContentsRes;\n    }\n\n    return this.elseContents.removeBlockAt(v, removeAfter);\n  }\n\n  drawSelf(ctx) {\n    ctx.fillStyle = '#3322ee';\n    const perim = this.getPerim();\n    ctx.beginPath();\n    ctx.moveTo(perim[0].x, perim[0].y);\n\n    for (const p of perim) {\n      ctx.lineTo(p.x, p.y);\n    }\n\n    ctx.fill();\n    ctx.fillStyle = '#000000';\n    ctx.font = '16px Arial';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    let curX = this.boundingBox.x;\n    ctx.fillText('if', curX + IF_BLOCK_IF_WIDTH / 2, this.ifHeaderBoundingBox.y + this.ifHeaderBoundingBox.h / 2);\n    ctx.fillText('else', curX + IF_ELSE_BLOCK_ELSE_WIDTH / 2, this.elseHeaderBoundingBox.y + this.elseHeaderBoundingBox.h / 2);\n  }\n\n  getReturnType() {\n    return 'VOID';\n  }\n\n  tryToPlace(v, blockToPlace, ctx) {\n    var _this$conditionBlock$;\n\n    if (!this.boundingBox.contains(v)) {\n      return null;\n    }\n\n    this.conditionBlock = (_this$conditionBlock$ = this.conditionBlock.tryToPlace(v, blockToPlace, ctx)) !== null && _this$conditionBlock$ !== void 0 ? _this$conditionBlock$ : this.conditionBlock;\n    const result = this.ifContents.tryToPlace(v, blockToPlace, ctx);\n    const result2 = this.elseContents.tryToPlace(v, blockToPlace, ctx);\n\n    if (result != null || result2 != null) {\n      console.log('ERROR! placing block in contents returned non-null meaning it got replaced!');\n    }\n\n    return null;\n  }\n\n}\n\nexport default IfElseBlock;","map":{"version":3,"sources":["/Users/Airor/Desktop/Fortuna/Fortuna/fortuna/src/casus/blocks/IfElseBlock.js"],"names":["BoundingBox","CasusBlock","EmptyBlock","ContainerBlock","Vec","IF_BLOCK_IF_WIDTH","IF_ELSE_BLOCK_ELSE_WIDTH","EMPTY_STATEMENT_HEIGHT","RAMP_WIDTH","VPADDING","IfElseBlock","constructor","conditionBlock","ifContents","elseContents","precompBounds","width","Math","max","boundingBox","w","height","h","ifHeaderBoundingBox","elseHeaderBoundingBox","getPerim","toReturn","ifHeader","elseHeader","bounding","push","x","y","precompXY","curX","curY","getChildBlocks","removeBlockAt","v","removeAfter","conditionRes","length","contains","draggable","ifContentsRes","drawSelf","ctx","fillStyle","perim","beginPath","moveTo","p","lineTo","fill","font","textAlign","textBaseline","fillText","getReturnType","tryToPlace","blockToPlace","result","result2","console","log"],"mappings":"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","sourcesContent":["//@flow strict\n\nimport BoundingBox from './BoundingBox.js';\nimport CasusBlock from './CasusBlock.js';\nimport EmptyBlock from './EmptyBlock.js';\nimport ContainerBlock from './ContainerBlock.js';\nimport Vec from './Vec.js';\n\nimport type {DataType} from './DataType.js';\n\nimport {\n\tIF_BLOCK_IF_WIDTH,\n\tIF_ELSE_BLOCK_ELSE_WIDTH,\n\tEMPTY_STATEMENT_HEIGHT,\n\tRAMP_WIDTH, \n\tVPADDING\n} from './generateCornerPerim.js';\n\nclass IfElseBlock extends CasusBlock {\n\n\tconditionBlock: CasusBlock;\n\tifContents: ContainerBlock;\n\telseContents: ContainerBlock;\n\tifHeaderBoundingBox: BoundingBox;\n\telseHeaderBoundingBox: BoundingBox;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.conditionBlock = new EmptyBlock('BOOLEAN');\n\t\tthis.ifContents = new ContainerBlock();\n\t\tthis.elseContents = new ContainerBlock();\n\t}\n\n\tprecompBounds(): void {\n\t\tthis.conditionBlock.precompBounds();\n\t\tthis.ifContents.precompBounds();\n\t\tthis.elseContents.precompBounds();\n\n\t\tlet width = Math.max(\n\t\t\tIF_BLOCK_IF_WIDTH + this.conditionBlock.boundingBox.w + RAMP_WIDTH, \n\t\t\tthis.ifContents.boundingBox.w + RAMP_WIDTH, \n\t\t\tIF_ELSE_BLOCK_ELSE_WIDTH,\n\t\t\tthis.elseContents.boundingBox.w + RAMP_WIDTH\n\t\t);\n\t\tlet height = VPADDING + this.conditionBlock.boundingBox.h + VPADDING;\n\n\t\tthis.ifHeaderBoundingBox = new BoundingBox(0, 0, width, height);\t\n\t\tthis.elseHeaderBoundingBox = new BoundingBox(\n\t\t\t0, \n\t\t\t0, \n\t\t\twidth, \n\t\t\tVPADDING + EMPTY_STATEMENT_HEIGHT + VPADDING\n\t\t);\n\n\t\theight+=this.ifContents.boundingBox.h;\n\t\theight+=this.elseHeaderBoundingBox.h;\n\t\theight+=this.elseContents.boundingBox.h;\n\t\theight+=RAMP_WIDTH;\n\n\t\tthis.boundingBox = new BoundingBox(0, 0, width, height);\n\t}\n\n\tgetPerim(): Array<Vec> {\n\t\tconst toReturn: Array<Vec> = [];\n\t\tconst ifHeader=this.ifHeaderBoundingBox;\n\t\tconst elseHeader=this.elseHeaderBoundingBox;\n\t\tconst bounding=this.boundingBox;\n\n\t\ttoReturn.push(new Vec(ifHeader.x, ifHeader.y));\n\t\ttoReturn.push(new Vec(ifHeader.x+ifHeader.w, ifHeader.y));\n\t\ttoReturn.push(new Vec(ifHeader.x+ifHeader.w, ifHeader.y+ifHeader.h));\n\t\ttoReturn.push(new Vec(ifHeader.x+RAMP_WIDTH, ifHeader.y+ifHeader.h));\n\n\t\ttoReturn.push(new Vec(elseHeader.x+RAMP_WIDTH, elseHeader.y));\n\t\ttoReturn.push(new Vec(elseHeader.x+elseHeader.w, elseHeader.y));\n\t\ttoReturn.push(new Vec(elseHeader.x+elseHeader.w, elseHeader.y+elseHeader.h));\n\t\ttoReturn.push(new Vec(elseHeader.x+RAMP_WIDTH, elseHeader.y+elseHeader.h));\n\n\t\ttoReturn.push(new Vec(elseHeader.x+RAMP_WIDTH, bounding.y+bounding.h-RAMP_WIDTH));\n\t\ttoReturn.push(new Vec(bounding.x+bounding.w, bounding.y+bounding.h-RAMP_WIDTH));\n\t\ttoReturn.push(new Vec(bounding.x+bounding.w, bounding.y+bounding.h));\n\t\ttoReturn.push(new Vec(bounding.x, bounding.y+bounding.h));\n\n\t\treturn toReturn;\n\t}\n\n\tprecompXY(x: number, y:number): void {\n\t\tthis.ifHeaderBoundingBox.x=x;\n\t\tthis.ifHeaderBoundingBox.y=y;\n\t\tthis.boundingBox.x=x;\n\t\tthis.boundingBox.y=y;\n\n\t\tlet curX = x + IF_BLOCK_IF_WIDTH;\n\t\tlet curY = y + VPADDING;\n\n\t\tthis.conditionBlock.precompXY(curX, curY);\n\n\t\tcurX = x + RAMP_WIDTH;\n\t\tcurY = y + this.ifHeaderBoundingBox.h;\n\t\tthis.ifContents.precompXY(curX, curY);\n\t\tcurY+=this.ifContents.boundingBox.h;\n\n\t\tthis.elseHeaderBoundingBox.x = x;\n\t\tthis.elseHeaderBoundingBox.y = curY;\n\t\tcurY+=this.elseHeaderBoundingBox.h;\n\n\t\tthis.elseContents.precompXY(curX, curY);\n\t}\n\n\tgetChildBlocks(): Array<CasusBlock> {\n\t\treturn [this.conditionBlock, this.ifContents, this.elseContents];\n\t}\n\n\tremoveBlockAt(v: Vec, removeAfter: boolean): Array<CasusBlock> {\n\t\tconst conditionRes = this.conditionBlock.removeBlockAt(v, removeAfter);\n\t\tif (conditionRes.length > 0) {\n\t\t\treturn conditionRes;\n\t\t}\n\t\tif (this.conditionBlock.boundingBox.contains(v) && this.conditionBlock.draggable()) {\n\t\t\tconst toReturn = [this.conditionBlock];\n\t\t\tthis.conditionBlock = new EmptyBlock('BOOLEAN');\n\t\t\treturn toReturn;\n\t\t}\n\n\t\tconst ifContentsRes = this.ifContents.removeBlockAt(v, removeAfter);\n\t\tif (ifContentsRes.length > 0) {\n\t\t\treturn ifContentsRes;\n\t\t}\n\t\treturn this.elseContents.removeBlockAt(v, removeAfter);\n\t}\n\n\tdrawSelf(ctx: CanvasRenderingContext2D): void {\n\t\tctx.fillStyle = '#3322ee';\n\n\t\tconst perim: Array<Vec> = this.getPerim();\n\t\tctx.beginPath();\n\t\tctx.moveTo(perim[0].x, perim[0].y);\n\t\tfor (const p of perim) {\n\t\t\tctx.lineTo(p.x, p.y);\n\t\t}\n\t\tctx.fill();\n\n\t\tctx.fillStyle = '#000000';\n\t\tctx.font = '16px Arial';\n\t\tctx.textAlign = 'center';\n\t\tctx.textBaseline = 'middle';\n\n\t\tlet curX = this.boundingBox.x;\n\t\tctx.fillText(\n\t\t\t'if', \n\t\t\tcurX + IF_BLOCK_IF_WIDTH/2,\n\t\t\tthis.ifHeaderBoundingBox.y + this.ifHeaderBoundingBox.h/2\n\t\t);\n\t\tctx.fillText(\n\t\t\t'else', \n\t\t\tcurX + IF_ELSE_BLOCK_ELSE_WIDTH/2,\n\t\t\tthis.elseHeaderBoundingBox.y + this.elseHeaderBoundingBox.h/2\n\t\t);\n\t}\n\n\tgetReturnType(): DataType {\n\t\treturn 'VOID';\n\t}\n\n\ttryToPlace(v: Vec, blockToPlace: CasusBlock, ctx: ?CanvasRenderingContext2D): ?CasusBlock {\n\t\tif (!this.boundingBox.contains(v)) {\n\t\t\treturn null;\n\t\t}\n\t\tthis.conditionBlock = this.conditionBlock.tryToPlace(v, blockToPlace, ctx) \n\t\t\t?? this.conditionBlock;\n\t\tconst result = this.ifContents.tryToPlace(v, blockToPlace, ctx);\n\t\tconst result2 = this.elseContents.tryToPlace(v, blockToPlace, ctx);\n\t\tif (result != null || result2 != null) {\n\t\t\tconsole.log('ERROR! placing block in contents returned non-null meaning it got replaced!');\n\t\t}\n\t\treturn null;\n\t}\n\n\n}\n\nexport default IfElseBlock;\n"]},"metadata":{},"sourceType":"module"}