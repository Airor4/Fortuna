{"ast":null,"code":"import CasusBlock from './CasusBlock.js';\nimport BoundingBox from './BoundingBox.js';\nimport Vec from './Vec.js';\nimport { RAMP_WIDTH, EMPTY_STATEMENT_HEIGHT } from './generateCornerPerim.js';\nimport generateCornerPerim from './generateCornerPerim.js';\nimport measureText from './measureText.js';\n\nclass VariableBlock extends CasusBlock {\n  constructor(dataType, name) {\n    super();\n    this.dataType = dataType;\n    this.name = name;\n  }\n\n  precompBounds() {\n    const mainWidth = measureText(this.name);\n    this.boundingBox = new BoundingBox(0, 0, RAMP_WIDTH + mainWidth.w + RAMP_WIDTH, EMPTY_STATEMENT_HEIGHT);\n  }\n\n  precompXY(x, y) {\n    this.boundingBox = new BoundingBox(x, y, this.boundingBox.w, this.boundingBox.h);\n  }\n\n  getChildBlocks() {\n    return [];\n  }\n\n  getPerim() {\n    return generateCornerPerim(this.boundingBox, this.dataType);\n  }\n\n  drawSelf(ctx) {\n    ctx.fillStyle = '#ee5522';\n    ctx.beginPath();\n    const perim = this.getPerim();\n    ctx.moveTo(perim[0].x, perim[0].y);\n\n    for (const p of perim) {\n      ctx.lineTo(p.x, p.y);\n    }\n\n    ctx.fill();\n    ctx.fillStyle = '#000000';\n    ctx.font = '16px Arial';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillText(this.name, this.boundingBox.x + this.boundingBox.w / 2, this.boundingBox.y + this.boundingBox.h / 2);\n  }\n\n  getReturnType() {\n    return this.dataType;\n  }\n\n  tryToPlace(v, blockToPlace, ctx) {\n    return null;\n  }\n\n}\n\nexport default VariableBlock;","map":{"version":3,"sources":["/Users/Airor/Desktop/Fortuna/Fortuna/fortuna/src/casus/blocks/VariableBlock.js"],"names":["CasusBlock","BoundingBox","Vec","RAMP_WIDTH","EMPTY_STATEMENT_HEIGHT","generateCornerPerim","measureText","VariableBlock","constructor","dataType","name","precompBounds","mainWidth","boundingBox","w","precompXY","x","y","h","getChildBlocks","getPerim","drawSelf","ctx","fillStyle","beginPath","perim","moveTo","p","lineTo","fill","font","textAlign","textBaseline","fillText","getReturnType","tryToPlace","v","blockToPlace"],"mappings":"AAEA,OAAOA,UAAP,MAAuB,iBAAvB;AACA,OAAOC,WAAP,MAAwB,kBAAxB;AACA,OAAOC,GAAP,MAAgB,UAAhB;AACA,SAAQC,UAAR,EAAoBC,sBAApB,QAAiD,0BAAjD;AACA,OAAOC,mBAAP,MAAgC,0BAAhC;AACA,OAAOC,WAAP,MAAwB,kBAAxB;;AAKA,MAAMC,aAAN,SAA4BP,UAA5B,CAAuC;AAKtCQ,EAAAA,WAAW,CAACC,QAAD,EAAqBC,IAArB,EAAmC;AAC7C;AACA,SAAKD,QAAL,GAAcA,QAAd;AACA,SAAKC,IAAL,GAAUA,IAAV;AACA;;AAEDC,EAAAA,aAAa,GAAS;AACrB,UAAMC,SAAS,GAAGN,WAAW,CAAC,KAAKI,IAAN,CAA7B;AACA,SAAKG,WAAL,GAAiB,IAAIZ,WAAJ,CAChB,CADgB,EAEhB,CAFgB,EAGhBE,UAAU,GAAGS,SAAS,CAACE,CAAvB,GAA2BX,UAHX,EAIhBC,sBAJgB,CAAjB;AAMA;;AAEDW,EAAAA,SAAS,CAACC,CAAD,EAAYC,CAAZ,EAA4B;AACpC,SAAKJ,WAAL,GAAiB,IAAIZ,WAAJ,CAAgBe,CAAhB,EAAmBC,CAAnB,EAAsB,KAAKJ,WAAL,CAAiBC,CAAvC,EAA0C,KAAKD,WAAL,CAAiBK,CAA3D,CAAjB;AACA;;AAEDC,EAAAA,cAAc,GAAsB;AACnC,WAAO,EAAP;AACA;;AAEDC,EAAAA,QAAQ,GAAe;AACtB,WAAOf,mBAAmB,CAAC,KAAKQ,WAAN,EAAmB,KAAKJ,QAAxB,CAA1B;AACA;;AAEDY,EAAAA,QAAQ,CAACC,GAAD,EAAsC;AAC7CA,IAAAA,GAAG,CAACC,SAAJ,GAAgB,SAAhB;AACAD,IAAAA,GAAG,CAACE,SAAJ;AACA,UAAMC,KAAiB,GAAG,KAAKL,QAAL,EAA1B;AACAE,IAAAA,GAAG,CAACI,MAAJ,CAAWD,KAAK,CAAC,CAAD,CAAL,CAAST,CAApB,EAAuBS,KAAK,CAAC,CAAD,CAAL,CAASR,CAAhC;;AACA,SAAK,MAAMU,CAAX,IAAgBF,KAAhB,EAAuB;AACtBH,MAAAA,GAAG,CAACM,MAAJ,CAAWD,CAAC,CAACX,CAAb,EAAgBW,CAAC,CAACV,CAAlB;AACA;;AACDK,IAAAA,GAAG,CAACO,IAAJ;AAEAP,IAAAA,GAAG,CAACC,SAAJ,GAAgB,SAAhB;AACAD,IAAAA,GAAG,CAACQ,IAAJ,GAAW,YAAX;AACAR,IAAAA,GAAG,CAACS,SAAJ,GAAgB,QAAhB;AACAT,IAAAA,GAAG,CAACU,YAAJ,GAAmB,QAAnB;AACAV,IAAAA,GAAG,CAACW,QAAJ,CACC,KAAKvB,IADN,EAEC,KAAKG,WAAL,CAAiBG,CAAjB,GAAqB,KAAKH,WAAL,CAAiBC,CAAjB,GAAmB,CAFzC,EAGC,KAAKD,WAAL,CAAiBI,CAAjB,GAAqB,KAAKJ,WAAL,CAAiBK,CAAjB,GAAmB,CAHzC;AAKA;;AAEDgB,EAAAA,aAAa,GAAa;AACzB,WAAO,KAAKzB,QAAZ;AACA;;AAED0B,EAAAA,UAAU,CAACC,CAAD,EAASC,YAAT,EAAmCf,GAAnC,EAAgF;AACzF,WAAO,IAAP;AACA;;AA5DqC;;AAgEvC,eAAef,aAAf","sourcesContent":["//@flow strict\n\nimport CasusBlock from './CasusBlock.js';\nimport BoundingBox from './BoundingBox.js';\nimport Vec from './Vec.js';\nimport {RAMP_WIDTH, EMPTY_STATEMENT_HEIGHT} from './generateCornerPerim.js';\nimport generateCornerPerim from './generateCornerPerim.js';\nimport measureText from './measureText.js';\n\nimport type {DataType} from './DataType.js';\n\n\nclass VariableBlock extends CasusBlock {\n\n\tdataType: DataType;\n\tname: string;\n\n\tconstructor(dataType: DataType, name: string) {\n\t\tsuper();\n\t\tthis.dataType=dataType;\n\t\tthis.name=name;\n\t}\n\n\tprecompBounds(): void {\n\t\tconst mainWidth = measureText(this.name);\n\t\tthis.boundingBox=new BoundingBox(\n\t\t\t0, \n\t\t\t0,\n\t\t\tRAMP_WIDTH + mainWidth.w + RAMP_WIDTH, \n\t\t\tEMPTY_STATEMENT_HEIGHT\n\t\t);\t\n\t}\n\n\tprecompXY(x: number, y:number): void {\n\t\tthis.boundingBox=new BoundingBox(x, y, this.boundingBox.w, this.boundingBox.h);\n\t}\n\n\tgetChildBlocks(): Array<CasusBlock> {\n\t\treturn [];\n\t}\n\n\tgetPerim(): Array<Vec> {\n\t\treturn generateCornerPerim(this.boundingBox, this.dataType);\n\t}\n\n\tdrawSelf(ctx: CanvasRenderingContext2D): void {\n\t\tctx.fillStyle = '#ee5522';\n\t\tctx.beginPath();\n\t\tconst perim: Array<Vec> = this.getPerim();\n\t\tctx.moveTo(perim[0].x, perim[0].y);\n\t\tfor (const p of perim) {\n\t\t\tctx.lineTo(p.x, p.y);\n\t\t}\n\t\tctx.fill();\n\n\t\tctx.fillStyle = '#000000';\n\t\tctx.font = '16px Arial';\n\t\tctx.textAlign = 'center';\n\t\tctx.textBaseline = 'middle';\n\t\tctx.fillText(\n\t\t\tthis.name,\n\t\t\tthis.boundingBox.x + this.boundingBox.w/2, \n\t\t\tthis.boundingBox.y + this.boundingBox.h/2\n\t\t);\n\t}\n\n\tgetReturnType(): DataType {\n\t\treturn this.dataType;\n\t}\n\n\ttryToPlace(v: Vec, blockToPlace: CasusBlock, ctx: ?CanvasRenderingContext2D): ?CasusBlock {\n\t\treturn null;\n\t}\n\n}\n\nexport default VariableBlock;\n"]},"metadata":{},"sourceType":"module"}